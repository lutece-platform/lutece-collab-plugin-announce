<#assign hide="">
<#list entry.fields as field>
	<#if field.conditionalQuestions?exists&&field.conditionalQuestions?size!=0>
		<#assign hide=hide+"hide(${field.idField});">
	</#if>	
</#list>
<@formGroup class='${entry.CSSClass!}' id='form${entry.idEntry}' labelFor='form${entry.idEntry}' labelKey='${entry.title}' mandatory=entry.mandatory htmlRequired=false>
	<#list entry.fields as field>
	    <#if field.code == 'answer_choice'>
			<#if entry.fieldInLine><#assign orientation='inline' /><#else><#assign orientation='vertical' /></#if>
			<#assign isChecked = false />
			<#if list_responses?? && list_responses?has_content>	
				<#list list_responses as response>
					<#if response.entry.idEntry == entry.idEntry && response.field??>
						<#if response.field.idField == field.idField>
							<#assign isChecked='true' >
							<#break>
						</#if>
					</#if>
				</#list>
			<#else>
				<#if field.defaultValue>
					<#assign isChecked = true />
				</#if>
			</#if>	
			
			<#assign params>
				onclick="${hide} <#if field.conditionalQuestions?exists&&field.conditionalQuestions?size!=0>
				doDisplay(${field.idField});</#if>"
			</#assign>	
			
			<#if !field.noDisplayTitle>
		       <#assign labelKey = field.title />
			<#else>
				<#assign labelKey = '' />
		    </#if>
		    
		    <#if !entry.fieldInLine && entry.helpMessage?exists && entry.helpMessage != ''>
				<@formHelp> entry.helpMessage </@formHelp>
			</#if>
			
			<#if field.comment?? && field.comment != ''>
				<@radioButton orientation=orientation labelFor='attribute${entry.idEntry}_${field.idField}' labelKey=labelKey title='${field.comment!}' id='attribute${entry.idEntry}_${field.idField}' name='attribute${entry.idEntry}' value='${field.idField}' checked=isChecked params=params />
			</#if>
		
		</#if>
	</#list>
</@formGroup>

<#if entry.fieldInLine&&entry.helpMessage?exists&&entry.helpMessage!=''>
	<@formHelp> ${entry.helpMessage} </@formHelp>
</#if>

<#if list_responses??>
	<#list list_responses as response>
		<#if response.entry.idEntry == entry.idEntry && response.entry.error??>
			<@alert color='danger'>
				<#assign error = response.entry.error>
				<#if error.mandatoryError>
					#i18n{announce.message.mandatory.entry}
				<#else>
					${error.errorMessage}
				</#if>
			</@alert>
		</#if>
	</#list>
</#if>

<#if str_list_entry_children?exists>${str_list_entry_children}</#if>

<#if list_responses??>
	<script type="text/javascript">
		<#list list_responses as response>
			<#if response.entry.idEntry == entry.idEntry && response.field??>
				var baliseId = "div" + ${response.field.idField};
				if(document.getElementById && document.getElementById(baliseId) != null)
				{
					document.getElementById(baliseId).style.visibility='visible';
					document.getElementById(baliseId).style.display='block';
				}
			</#if>
		</#list>
	</script>
<#else>
	<#list entry.fields as field>
		<#if field.defaultValue && field.conditionalQuestions?exists && field.conditionalQuestions?size != 0>
			<script type="text/javascript">
				var baliseId = "div" + ${field.idField};
				
				if(document.getElementById && document.getElementById(baliseId) != null)
				{
					document.getElementById(baliseId).style.visibility='visible';
					document.getElementById(baliseId).style.display='block';
				}
			</script>
		</#if>
	</#list>
</#if>