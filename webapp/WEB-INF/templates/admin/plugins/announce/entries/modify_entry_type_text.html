<@row>
	<@box>
		<@boxHeader title='#i18n{announce.modifyEntry.titleQuestion}  - ${category.label} - #i18n{announce.createEntry.labelType}  ${entry.entryType.title}' />
		<@boxBody>
			<#assign config=getFieldByCode( entry, "text_config")>
			<@tform class='form-horizontal' action='jsp/admin/plugins/announce/ManageCategoryEntries.jsp' method='post'>
			<@input name='id_entry' value='${entry.idEntry}' type='hidden' />
			<@input name='action' value='doModifyEntry' type='hidden' />
				<@formGroup labelKey='#i18n{announce.createEntry.labelTitle}' mandatory=true >
						<@input type='text' name='title' id='title' class='form-control' value='${entry.title}' maxlength=255 />
						<@span class='help-block'>#i18n{announce.createEntry.labelTitleComment}</@span>
				</@formGroup>
				<@formGroup labelKey='#i18n{announce.createEntry.labelHelpMessage}' >
						<@input type='textarea' name='help_message' id='help_message' rows=5 class='form-control' value='${entry.helpMessage}' />
						<@span class='help-block'>#i18n{announce.createEntry.labelHelpMessageComment}</@span>
				</@formGroup>
				<@formGroup labelKey='#i18n{announce.createEntry.labelComment}' >
						<@input type='textarea' name='comment' id='comment' value='${entry.comment!}' rows=5 class='form-control' />
				</@formGroup>
				<@formGroup labelKey='#i18n{announce.createEntry.labelValueDefault}'>
					<@input type='text' name='value' id='value' class='form-control' value='${config.value!}' />
				</@formGroup>
				<@formGroup>
					<#if entry.mandatory>
						<@checkBox orientation='switch' labelFor='mandatory' labelKey='#i18n{announce.createEntry.labelMandatory}' name='mandatory' id='mandatory' value='1' params='onchange="javascript:changeVisilityAnonymizePattern();"' checked=true />
					<#else>
						<@checkBox orientation='switch' labelFor='mandatory' labelKey='#i18n{announce.createEntry.labelMandatory}' name='mandatory' id='mandatory' value='1' params='onchange="javascript:changeVisilityAnonymizePattern();"' checked=false />
					</#if>
				</@formGroup>
				<@formGroup labelKey='#i18n{announce.createEntry.labelMandatoryErrorMessage}'>
					<@input type='textarea' name='errorMessage' class='form-control' rows=2 value='${entry.errorMessage!}' />
					<@span class="help-block">#i18n{announce.createEntry.labelMandatoryErrorMessageHelp}</@span>
				</@formGroup>		
				<@formGroup labelKey='#i18n{announce.createEntry.labelWidth}' mandatory=true >
					<@input type='number' name='width' id='width' value='${config.width}' class='form-control' />
				</@formGroup>
				<#assign id_field=field.idField> 
				<@formGroup labelKey='#i18n{announce.createEntry.labelMaxSizeEnter}' >
					<#if config.maxSizeEnter!=-1>
						<#assign value=config.maxSizeEnter />
						<@input type='number' name='max_size_enter' id='max_size_enter' value=value class='form-control' />
					</#if>
				</@formGroup>
				<@formGroup>
					 <#if entry.confirmField>
						<@checkBox orientation='switch' labelFor='confirm_field' labelKey='#i18n{announce.createEntry.labelConfirmField}' name='confirm_field' id='confirm_field' value='1' params='onchange="javascript:changeVisilityAnonymizePattern();"' checked=true />
					<#else>
						<@checkBox orientation='switch' labelFor='mandatory' labelKey='#i18n{announce.createEntry.labelConfirmField}' name='mandatory' id='mandatory' value='1' params='onchange="javascript:changeVisilityAnonymizePattern();"' checked=false />
					</#if>
				</@formGroup>
				<@formGroup labelKey='#i18n{announce.createEntry.labelConfirmFieldTitle}' mandatory=true >
					<@input type='text' name='confirm_field_title' id='confirm_field_title' class='form-control' value='${entry.confirmFieldTitle!}' maxlength=255 />
				</@formGroup>
				<@formGroup labelKey='#i18n{announce.createEntry.labelCSSClass}'>
					<@input type='text' name='css_class' value='${entry.CSSClass!}' maxlength=255 class='form-control' />
					<@span class='help-block'>#i18n{announce.createEntry.labelCSSClassComment}</@span>	
				</@formGroup>
				<@formGroup>
					<@button type='submit' name='action_createQuestion' buttonIcon='save' title='#i18n{announce.createEntry.buttonSave}' hideTitle=['xs'] size='' />
					<@button class='btn btn-primary btn-flat' name='apply' type='submit' buttonIcon='apply' title='#i18n{announce.modifyEntry.buttonApply}' />
					<@aButton class='btn btn-default btn-flat' title='#i18n{announce.createEntry.buttonCancel}' params='style="background-color: #ffffff; color: black;"' href='jsp/admin/plugins/announce/ModifyCategory.jsp?category_id=${category.id}' />
				</@formGroup>
			</@tform>
		</@boxBody>
	</@box>
</@row>
<#if regular_expression_list?exists>
<@row>
	<@box>
		<@boxHeader title='#i18n{announce.createEntry.manageRegularExpression.title}' >
			<@tform class='form-inline pull-right'  method='post'  action='jsp/admin/plugins/announce/ManageCategoryEntries.jsp#list'>
				<@input name='id_field' value='${id_field}' type='hidden' />
				<@input name='action' value='doInsertRegularExpression' type='hidden' />
				<@formGroup formStyle='vertical' labelKey='#i18n{announce.createEntry.manageRegularExpression.labelInsert}'>
					<@inputGroup>
						<@select name='id_expression' items=regular_expression_list default_value="-1" params='class="form-control input-xs"' />
						<@span class='input-group-btn'>
							<@button class='btn btn-primary btn-xs btn-flat' type='submit' title='#i18n{announce.createEntry.manageRegularExpression.buttonInsert}' />
						</@span>
					</@inputGroup>
				</@formGroup>
			</@tform>
		</@boxHeader>
		<@boxBody>
			<@span>#i18n{announce.createEntry.manageRegularExpression.labelInsertComment}</@span>
			<@table>
				<@tr> 
					<@th>#i18n{announce.createEntry.manageRegularExpression.rowTitle}</@th>
					<@th>#i18n{announce.createEntry.manageRegularExpression.rowInformationMessage}</@th>
					<@th>#i18n{announce.createEntry.manageRegularExpression.rowValidExemple}</@th>
					<@th>#i18n{announce.createEntry.manageField.rowActions}</@th>
				</@tr>
				<@tableHeadBodySeparator />	
				<#list list as field>	
					<#list field.regularExpressionList as expression>
						<@tr>
							<@td>${expression.title}</@td>
							<@td>${expression.informationMessage}</@td>
							<@td>${expression.validExemple}</@td>
							<@td>
								<@aButton href='jsp/admin/plugins/announce/ManageCategoryEntries.jsp?action=doRemoveRegularExpression&id_expression=${expression.idExpression}&id_field=${id_field}' title='#i18n{announce.createEntry.manageField.titleDelete}' buttonIcon='trash' hideTitle=['all'] color='danger'  />
							</@td>
						</@tr>
					</#list>
				</#list>
			</@table>
		</@boxBody>
	</@box>
</@row>
</#if>
<#include "/admin/util/editor/editor.html" />

<script type="text/javascript">
changeVisilityConfirmFieldTitle();
function changeVisilityConfirmFieldTitle()
	{
		if(document.getElementById("confirm_field").checked)
		{
	  		document.getElementById("confirm_field_title_p").style.display = 'block';
		}
		else
		{
	  		document.getElementById("confirm_field_title_p").style.display = 'none';
		}
	} 
 </script>
 <@initEditor />