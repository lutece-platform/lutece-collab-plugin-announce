<#assign cpt=0>
<@formGroup class='${entry.CSSClass!}' labelFor='form${entry.idEntry}' labelId='form${entry.idEntry}' labelKey='${entry.title}' mandatory=entry.mandatory htmlRequired=false >
	<#assign inLine = entry.fieldInLine>
	<#list entry.fields as field>
		<#if field.code == 'answer_choice'>
			<#assign idName = buildEntryName( entry, entry_iteration_number )>
			<#if entry.fieldInLine><#assign style = 'inline' /><#else><#assign style = 'vertical' /></#if>
			<#if field.comment?? && field.comment != ''><#assign title= "${field.comment}" /><#else><#assign title = '' /></#if>
			<#if list_responses?? && list_responses?has_content>
				<#list list_responses as response>
					<#if response.entry.idEntry == entry.idEntry && response.field??>
						<#if response.field.idField == field.idField>
							<#assign isChecked = true />
						<#else>
							<#assign isChecked = false />
						</#if>
					</#if>
				</#list>
				<#else>
					<#if field.defaultValue>
						<#assign isChecked = true />
					<#else>
						<#assign isChecked = false />
					</#if>
				</#if>
				<#if !field.noDisplayTitle>
					<#assign labelKey = field.title />
				<#else>
					<#assign labelKey = '' />
				</#if>
				<#if field.conditionalQuestions?exists&&field.conditionalQuestions?size!=0>
					<#assign idConditional = 'div' + field.idField>
			        <#assign params='onclick="doCheckboxEffect(this.checked,${idConditional}.id);"' />
				<#else>
					<#assign params = '' />
				</#if>
				
				<@checkBox orientation=style labelFor='${idName}_${field.idField}' labelKey=labelKey title=title name='${idName}' id='${idName}_${field.idField}' value='${field.idField}' checked=isChecked params=params />
				
				<#if !entry.fieldInLine&&entry.helpMessage?exists&&entry.helpMessage!=''>
					<@formHelp>entry.helpMessage</@formHelp>
				</#if>
		</#if>
	</#list>
	<#if entry.fieldInLine&&entry.helpMessage?exists&&entry.helpMessage!=''>
      <@formHelp>${entry.helpMessage}</@formHelp>
    </#if> 
    <#if list_responses??>
		<#list list_responses as response>
		  <#if response.entry.idEntry == entry.idEntry && response.entry.error??>
			<@alert color='danger'>
				<#assign error = response.entry.error>
				<#if error.mandatoryError>#i18n{announce.message.mandatory.entry}<#else>${error.errorMessage}</#if>
			</@alert>
		  </#if>
		</#list>
	</#if>
    <#if str_list_entry_children?exists>${str_list_entry_children}</#if>
</@formGroup>
<#if list_responses??>
	<script type="text/javascript">
		<#list list_responses as response>
			<#if response.entry.idEntry == entry.idEntry && response.field??>
				var baliseId = "div" + ${response.field.idField};
				if(document.getElementById && document.getElementById(baliseId) != null)
				{
					document.getElementById(baliseId).style.visibility='visible';
					document.getElementById(baliseId).style.display='block';
				}
			</#if>
		</#list>
	</script>
<#else>
	<#list entry.fields as field>
		<#if field.defaultValue && field.conditionalQuestions?exists && field.conditionalQuestions?size != 0>
		<script type="text/javascript">
			var baliseId = "div" + ${field.idField};
			if(document.getElementById && document.getElementById(baliseId) != null)
			{
			document.getElementById(baliseId).style.visibility='visible';
			document.getElementById(baliseId).style.display='block';
			}
		</script>
		</#if>
	</#list>
</#if>